<?xml version="1.0"?>


<launch>
	<include file="$(find andbot)/launch/display_sonar.launch" />
	
	<arg name="razor_config_file" default="$(find razor_imu_9dof)/config/andbot2_razor.yaml"/>
  	<node pkg="razor_imu_9dof" type="imu_node.py" name="imu_node" output="screen">
    	  <rosparam file="$(arg razor_config_file)" command="load"/>
  	</node>	

	<include file="$(find andbot)/launch/dwa_move_base_ekf.launch" />
	
	<include file="$(find rplidar_ros)/launch/rplidar.launch" />

	<node pkg="andbot" type="mybot_rplidar_laser_angular_bound_filter" name="mybot_rplidar_laser_angular_bound_filter" />
	<node pkg="andbot" type="mybot_base_controller_v1" name="mybot_base_controller_v1" />	
	<!-- run serial node for base mega -->	
	<node pkg="rosserial_python" type="serial_node.py" name="serial_node">
    		<param name="port" value="/dev/ttyACM0"/>
    		<param name="baud" value="1000000"/>
  	</node>
	
	<node pkg="andbot" type="mybot_odom_ekf_v1" name="mybot_odom_ekf_v1" />
<!--
	<include file="$(find andbot)/launch/gmapping_ekf.launch" />
-->	
	<include file="$(find andbot)/launch/amcl_andbot2.launch" />

	<node pkg="rosserial_python" type="serial_node1.py" name="serial_node1">
                <param name="port" value="/dev/ttyACM1"/>
                <param name="baud" value="1000000"/>
        </node>

	<node pkg="rosserial_python" type="serial_node2.py" name="serial_node2">
                <param name="port" value="/dev/ttyACM2"/>
                <param name="baud" value="1000000"/>
        </node>
<!--
	<include file="$(find andbot)/launch/arm.launch" />
-->	
	<include file="$(find robot_pose_ekf)/robot_pose_ekf.launch" />
        <node pkg="position_listener" type="position_listener_ekf" name="position_listener_ekf"/>
	<node pkg="andbot" type="sonar" name="sonar"/>
	<node pkg="andbot" type="app_sub" name="app_sub"/>
	
<!--
	<include file="$(find andbot)/launch/robot_mapping.launch" />
-->
</launch>
